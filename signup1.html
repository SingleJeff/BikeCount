<html>

<head>
<link rel="shortcut icon" href="https://ssl.gstatic.com/docs/spreadsheets/forms/favicon_jfk2.png" type="image/x-icon"/>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<title>2013 Tempe Bike Count Volunteer Sign-Up</title>
<link href="signupformgoogle_files/779923916-published_form_compiled.css" type="text/css" rel="stylesheet"/>
<!-- <script type="text/javascript" src="openlayers/lib/OpenLayers.js"></script> -->
<script type="text/javascript" src='jquery.min.js'></script>
<script type="text/javascript" src='http://openlayers.org/api/OpenLayers.js'></script>
</head>

<body class="ss-base-body" dir="ltr" itemscope="" itemtype="http://schema.org/CreativeWork/FormObject" onload="draw_map();">

<div class="ss-form-container">
<div class="ss-form-heading"><h1 class="ss-form-title">2013 Tempe Bike Count Volunteer Sign-Up</h1>
<p></p>
<div class="ss-form-desc ss-no-ignore-whitespace">
Thank you for volunteering for the Tempe Bike Count.
There are six possible shifts: AM and PM shifts on March 25, 26, and 27.
The AM shifts are 7am to 9am.  The PM shifts are 4pm to 6pm.
This is the sign up form.  Read more about the event at <a href="http://www.biketempe.org/events/bike-count/">http://www.biketempe.org/events/bike-count/</a>.
Info collected is for use at this event only, and to alert you when the very next 
Bike Count comes around.  It will not be sold or distributed.  If we can't reach you by
email to confirm your count time and location, we will assign your intersection to someone else.
Sign up for the newsletter at <a href="http://biketempe.org">biketempe.org</a> to hear about events, volunteer opertunities, and projects.
Contact <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAAIAQAAAABigggfAAAAgklEQVQImWWOIQ7CUBBEV3GGFT3E
SgSH6QkICjVZwTEQPQCnWDXqB0kqqqt7gJ8fuqUEwUsmeXlqJDQkMaSZfAnZ+y3t1+uxAGDF/WOl
QnB2oY5M7JFmbKTwsk6XFntfmrUXm7B/yqxjbH1Is+Aca7/KdCrucHZI65yTK/qD/LHdwxtfAE2P
dXLBzAAAAABJRU5ErkJggg=="> for help, to remove a shift, etc.
<a href="http://azcrap.org/bikecount/unassigned_locations.txt" target="_blank">Here are the AM (xxxA) and PM (xxxP) locations that are still open</a>.
<!--
<b>Update:</b> Both training dates are past and shift confirmations have been mailed out.
If you sign up past this point, you need to coordinate directly with Scott at the email address
above.
  -->
</div>

<hr class="ss-email-break" style="display: none;">
<br>
<div class="ss-required-asterisk">* RequiredERROR</div></div>
<br>
<div class="ss-form">

<form method="POST" id="ss-form" action="http://azcrap.org:5000/">

<script type="text/javascript">

function view_current_assignments() {
    $.ajax({
        type: "GET",
        url: "?action=get_assignments&email_address=" + document.getElementById('email_address').value
    }).done(function( html ) {
        document.getElementById('current_assignments').innerHTML = html;
        document.getElementById('current_assignments_popup').innerHTML = html;
        document.getElementById('assignments').style.display = 'block';
    });
}
</script>

<div class="errorbox-good">
    <div class="ss-item ss-item-required ss-text">
        <div class="ss-form-entry"><label class="ss-q-title" for="email_address">Email Address
            <span class="ss-required-asterisk">*</span></label>
            <label class="ss-q-help" for="email_address"></label>
            <input name="email_address" class="ss-q-short" id="email_address" type="text" onload="this.focus()">
            <input type="button" value="<-- View Your Current Assignment(s)" onclick="view_current_assignments()">

        </div>
    </div>
</div>

<div id="assignments" style="display:none; background:#FFF; border:solid 1px #BBBBBB; border-radius:5px; box-shadow:0px 0px 15px #999; ">
    <div class='arrow'></div>
    <div class='arrow-border'></div>
    <div id="current_assignments_popup">Loading...</div>
    <input value="Okay" type="button" onclick="document.getElementById('assignments').style.display = 'none';">
</div>

<div class="errorbox-good">
    <div class="ss-item ss-item-required ss-text">
        <div class="ss-form-entry">
            <label class="ss-q-title" for="first_name">First Name <span class="ss-required-asterisk">*</span></label>
            <label class="ss-q-help" for="first_name"></label>
            <input name="first_name" class="ss-q-short" id="first_name" type="text">
        </div>
    </div>
</div>


<div class="errorbox-good">
<div class="ss-item ss-item-required ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="last_name">Last Name
<span class="ss-required-asterisk">*</span></label>
<label class="ss-q-help" for="last_name"></label>
<input name="last_name" class="ss-q-short" id="last_name" type="text"></div></div></div>


<div class="errorbox-good">
<div class="ss-item ss-item-required ss-text"><div class="ss-form-entry"><label class="ss-q-title" for="phone_number">Phone Number
<span class="ss-required-asterisk">*</span></label>
<label class="ss-q-help" for="phone_number"></label>
<input name="phone_number" class="ss-q-short" id="phone_number" type="text"></div></div></div>

<!-- early reg quiz -->

<div class="errorbox-good">
<div class="ss-item ss-item-required ss-radio"><div class="ss-form-entry"><label class="ss-q-title" for="entry_7">Bike Count Training Session
<span class="ss-required-asterisk">*</span></label>
<label class="ss-q-help" for="entry_7">All volunteers must attend one 60
minute training rally at Boulders on Broadway at 530 W Broadway Rd.
We'll be upstairs.  Pizza will be provided. 
Please indicate which date you plan to attend.</label>
<ul class="ss-choices">
<li class="ss-choice-item"><label class="ss-choice-label"><input name="training_session" value="Thu 3/20" class="ss-q-radio" type="radio">Thu 3/20</label></li>
<li class="ss-choice-item"><label class="ss-choice-label"><input name="training_session" value="Sun 3/23" class="ss-q-radio" type="radio">Sun 3/23</label></li>
<li class="ss-choice-item"><input name="training_session" value="Other" class="ss-q-radio" id="other_option:7" type="radio"><label for="other_option:7">Other:</label>
<input name="training_session_comment" class="ss-q-other" type="text">
</li></ul>
</div></div></div>

<div class="errorbox-good">
    <div class="ss-item ss-item-required ss-text">
        <div class="ss-form-entry">
            <label class="ss-q-title" for="comments">Comments</label>
            <label class="ss-q-help" for="comments">Anything you want the organizers to know?</label>
            <textarea name="comments" cols="50" rows="6" class="ss-q-short" id="comments">COMMENTS</textarea>
        </div>
    </div>
</div>


<div>
    <input type="hidden" name="action" id="action" value="register">
    <input type="hidden" name="shift" id="shift_input">
    <input name="location_id" class="ss-q-other" id="location_id" type="hidden">

<!-- OSM map -->

<div class="errorbox-good">
    <div class="ss-q-title">Your Current Assignment(s)</div>
    <div class="ss-item ss-item-required ss-text">
        <div class="ss-form-entry">
            <div id="current_assignments">CURRENT_ASSIGNMENTS</div>
        </div>
    </div>
</div>

<div id="assignment_details" style="display:none; background:#FFF; border:solid 1px #BBBBBB; border-radius:5px; box-shadow:0px 0px 15px #999;">

    <div id="intersection_name" class="ss-q-title"></div>

    <div class="ss-item ss-item-required ss-radio"><div class="ss-form-entry">
    <label class="ss-q-title" for="shift">Bike Count Shift</label>
    <ul class="ss-choices" id="intersection_options">
    <!--
        these options load over the 'net
      -->
    </ul>
    </div></div>

    <script type="text/javascript">
    
    function copy_shift_value() {

//        var shift_form = $('#shift_form');
//        for (var i=0; i < shift_form.elements.length; i++) {
//            if (elements[i].checked) {
//                document.getElementById('shift_input').value = radios[i].value;
//            }
//        }

//        var shift_form = $('#shift_form');
//        var shift2 = shift_form.elements[0];
//        for (var i=0; i < shift2.length; i++) {
//            if (shift2[i].checked) {
//                document.getElementById('shift_input').value = shift2[i].value;
//            }
//        }


    }

    </script>

    <div class="ss-item ss-navigate"><div class="ss-form-entry">
        <input name="continue" value="Add Assignment" type="button" onclick=" document.getElementById('ss-form').submit();">
        <!-- <input value="Go Back" type="button" onclick="document.getElementById('assignment_details').style.display = 'none';"> -->
    </div></div>

</div>

<div>
    <div class="ss-q-title">Click Widget To See Intersection Availability</div>
    <div class="ss-form-desc ss-no-ignore-whitespace">Count dates are Tues March 25, Wed March 26, and Thurs March 27.
    </div>
</div>

<div id="map" style=" width: 512px; height: 256px; border: 1px solid #ccc; "></div>

<script type="text/javascript">

function draw_map() {

    var pois = POIS;

    var map = new OpenLayers.Map("map");
    
    var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
    // var toProjection   = map.getProjectionObject(); // new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection ... that works for positioning hte map but breaks positioning the markers
    var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection

    var osm = new OpenLayers.Layer.OSM("OSM Layer", [
        "http://a.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png",
        "http://b.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png",
        "http://c.tile.opencyclemap.org/cycle/${z}/${x}/${y}.png"
    ]);
    map.addLayer(osm);   // addLayer on a scalar, addLayers on an array

    var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);

    for( var i=0; i < pois.length; i++ ) {
 
        var lonLat = new OpenLayers.LonLat( pois[i].lon, pois[i].lat ).transform( fromProjection, toProjection );
        var new_marker = new OpenLayers.Marker(lonLat);

        (function() {
            var desc = pois[i].desc;
            new_marker.events.register('mousedown', new_marker, function (ob) {
                // document.getElementById('intersection').value = desc;
                document.getElementById('location_id').value = desc;
                document.getElementById('intersection_name').innerHTML = desc;
                $('#map_alternative').val( desc ); // select the same thing on the back-up select list below
                $.ajax({
                    type: "GET",
                    url: "?action=get_times_for_intersection&location_id=" + desc
                }).done(function( html ) {
                    document.getElementById('assignment_details').style.display = 'block';
                    document.getElementById('intersection_options').innerHTML = html;
                });
            });
        })();
        markers.addMarker(new_marker);

    }

    // from http://opencyclemap.org/?zoom=12&lat=33.39199&lon=-111.93891&layers=B00
    var position = new OpenLayers.LonLat(-111.93891, 33.39199).transform( fromProjection, toProjection);
    var zoom = 12;
    map.setCenter( position, zoom );
}

</script>

<p>
    <select name="map_alternative" id="map_alternative">
        AVAILABLEINTERSECTIONS
    </select>
</p>

<script type="text/javascript">

    $('#map_alternative').change(function() {
        var desc = $('#map_alternative').val();
        document.getElementById('location_id').value = desc;
        document.getElementById('intersection_name').innerHTML = desc;
        $.ajax({
            type: "GET",
            url: "?action=get_times_for_intersection&location_id=" + desc
        }).done(function( html ) {
            document.getElementById('assignment_details').style.display = 'block';
            document.getElementById('intersection_options').innerHTML = html;
        });
    });

</script>

<!-- /OSM map -->

</form>

<script type="text/javascript">
      
      (function() {
var divs = document.getElementById('ss-form').
getElementsByTagName('div');
var numDivs = divs.length;
for (var j = 0; j < numDivs; j++) {
if (divs[j].className == 'errorbox-bad') {
divs[j].lastChild.firstChild.lastChild.focus();
return;
}
}
// for (var i = 0; i < numDivs; i++) {
//     var div = divs[i];
//     if (div.className == 'ss-form-entry' &&
//         div.firstChild &&
//         div.firstChild.className == 'ss-q-title') {
//         div.lastChild.focus();
//         return;
//     }
// }
})();
      </script>
</div>
</div></div></body></html>

